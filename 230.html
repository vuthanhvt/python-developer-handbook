
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Robots" content="INDEX,NOFOLLOW">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
<TITLE>Safari | Python Developer's Handbook -&gt; Compiling Python</TITLE>
<LINK REL="stylesheet" HREF="oreillyi/oreillyN.css">
</HEAD>
<BODY bgcolor="white" text="black" link="#990000" vlink="#990000" alink="#990000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">

<table width="100%" cellpadding=5 cellspacing=0 border=0 class="navtopbg"><tr><td><font size="1"><p class="navtitle"><a href="8.html" class="navtitle">Web Development</a> &gt; <a href="0672319942.html" class="navtitle">Python Developer's Handbook</a> &gt; <a href="227.html" class="navtitle">17. Development Tools</a> &gt; <span class="nonavtitle">Compiling Python</span></p></font></td><td align="right" valign="top" nowrap><font size="1"><a href="main.asp?list" class="safnavoff">See All Titles</a></font></td></tr></table>
<TABLE width=100% bgcolor=white border=0 cellspacing=0 cellpadding=5><TR><TD>
<TABLE border=0 width="100%" cellspacing=0 cellpadding=0><TR><td align=left width="15%" class="headingsubbarbg"><a href="229.html" title="The Development Process of Python Programs"><font size="1">&lt;&nbsp;BACK</font></a></td><td align=center width="70%" class="headingsubbarbg"><font size="1"><a href="popanote.asp?pubui=oreilly&bookname=0672319942&snode=230" target="_blank" title="Make a public or private annnotation">Make Note</a> | <a href="230.html" title="Use a Safari bookmark to remember this section">Bookmark</a></font></td><td align=right width="15%" class="headingsubbarbg"><a href="231.html" title="Editing Code"><font size="1">CONTINUE&nbsp;&gt;</font></a></td></TR></TABLE>
<a href="6%2F1%2F2002+6%3A21%3A13+PM.html" TABINDEX="-1"><img src=images/spacer.gif border=0 width=1 height=1></a><font color=white size=1>152015024128143245168232148039196038240039088173205162105045222218065012140210174141027</font><a href="read2.asp?bookname=0672319942&snode=230&now=6%2F1%2F2002+6%3A21%3A13+PM" TABINDEX="-1"><img src=images/spacer.gif border=0 width=1 height=1></a><br>
<FONT>
				<h3>





Compiling Python</h3>
				<p>The Python source code distribution comes with complete instructions about how to compile the code for both Windows and UNIX platforms. The instructions about compiling for Windows are stored in the subdirectories <tT CLAss="monofont">/PCbuild</tt> and <TT CLass="monofont">/PC</tT>—the UNIX instructions are separate. The <TT Class="monofont">/PC</tt> subdirectory contains complete project files to make several PC ports of Python.</p>

				<p>If you want to compile Python on Windows, you need to start the Integrated Development Environment of your compiler and read in the native <a name="idx1073749910"></a>
					<a name="idx1073749911"></a>
					<I>project file</i> (or makefile) provided. This enables you to change any source files or build settings so you can make custom builds.</p>

				<P>The following are important files that can help you configure the port of the source code to your favorite platform (in case it hasn't been ported yet).</p>

				<blOckquOte>
<p>
						<A NAMe="idx1073749912"></a>
						<a nAME="idx1073749913"></A>
						<p><tt cLASS="monofont">config.h</tt>— 
    An important configuration file specific to PCs. This is generated by the <tt CLASs="monofont">configure</tt> script on UNIX systems.</p>

					</p>
<p>
						<a name="idx1073749914"></a>
						<a name="idx1073749915"></a>
						<p><tT clAss="monofont">config.c</tT>— 
    The list of C modules to include in the Python PC version. Manually edit this file to add or remove Python modules. This is auto-generated by the <tt clAss="monofont">makesetup</tT> script on UNIX systems.</P>

					</P>
<P>
						<a namE="idx1073749916"></A>
						<A Name="idx1073749917"></a>
						<P><TT Class="monofont">testpy.py</TT>— 
    A Python test program. Run this to <A Name="idx1073749918"></a>
								<a name="idx1073749919"></a>test your Python port. It should produce copious output, ending in a report on how many tests were OK, how many failed, and how many were skipped. Don't worry about skipped tests (these test unavailable optional features).<a name="idx1073749920"></a>
								<a namE="idx1073749921"></a>
								<a Name="idx1073749922"></A>
								<a namE="idx1073749923"></a>
								<a nAME="idx1073749924"></A>
								<a namE="idx1073749925"></A>
							</P>

					</P>
</blocKQUOte>
				
					<h4>
Windows</h4>
					<P>The Python distribution comes with instructions to compile the source code using many different tools, such as Microsoft Visual C++ Version 1.5 (16-bit Windows), Watcom C++ compiler, and IBM VisualAge C/C++ for OS/2. See the <TT Class="monofont">/PC/readme.txt</tt> file in the distribution tree for detailed instructions.</p>

					<p>The instructions here cover the Microsoft Visual C++ Versions 5.0 and 6.0.</p>

					<p>In order to build Python using this tool, the first thing you need to do is open the workspace <tt class="monofont">pcbuild.dsw</tt> that is located under the <a NamE="idx1073749926"></a>
						<a nAme="idx1073749927"></a>
						<tT claSS="monofont">/PCbuild</TT> directory. This directory also contains a <tt clASS="monofont">readme.txt</Tt> file with more instructions. Note that all files in this directory are used to build Python for Win32 platforms, which includes Windows 95, 98, and NT platforms.</p>

					<p>Then, you just need to select the Debug or Release setting (using Set Active Configuration in the Build menu) and build the projects in the proper order, which is</p>

					<OL TYpe="1">
<li>

							<P>python15 (this builds python15.dll and python15.lib)</P>

						</LI>
<li>

							<p>python (this builds python.exe)</p>

						</li>
<li>

							<p>The other subprojects</p>

						</li>
</ol>

					<p>If you select the <a name="idx1073749928"></A>
						<a nAme="idx1073749929"></a>
						<A name="idx1073749930"></A>Debug option, the files will be generated carrying a <tt cLASS="monofont">_d</tt> at the end of their name, such as <tt CLASs="monofont">python15_d.dll,</tt>
						<tT CLAss="monofont">python_d.exe,</tt> and <TT CLass="monofont">parser_d.pyd.</tt>
					</p>

					<p>We call <a name="idx1073749931"></a>subprojects—the other applications that don't come as part of the Python application—that include for example: Tcl/Tk, bsddb, and zlib. In order to build these projects, you might have to change some of the settings on your compiler, such as the include and library paths.<a name="idx1073749932"></a>
						<a NamE="idx1073749933"></a>
						<a nAme="idx1073749934"></a>
						<a Name="idx1073749935"></A>
						<A NAme="idx1073749936"></a>
						<a NAME="idx1073749937"></a>
					</p>

					<p>The following files and subdirectories of the distribution are useful and helpful when building Win32 versions of Python:</p>

					<BLOCkquoTE>
<P>
							<A name="idx1073749938"></a>
							<a name="idx1073749939"></a>
							<p><tt class="monofont">python_nt.rc</tT>— 
    Resource compiler input for <tt ClasS="monofont">python15.dll.</tt>
								</p>

						</p>
<P>
							<a naME="idx1073749940"></A>
							<A name="idx1073749941"></A>
							<P><TT clasS="monofont">dl_nt.c, <A NAme="idx1073749942"></a>
										<a NAME="idx1073749943"></a>import_nt.c</tt>— 
    Additional sources used for 32-bit Windows features.</p>

						</p>
<p>
							<a name="idx1073749944"></a>
							<a name="idx1073749945"></a>
							<p><tT clAss="monofont">getpathp.c</tT>— 
    Default <tt clAss="monofont">sys.path</tT> calculations (for all PC platforms).</P>

						</P>
<P>
							<a namE="idx1073749946"></A>
							<A Name="idx1073749947"></a>
							<P><TT Class="monofont">dllbase_nt.txt</TT>— 
    A (manually maintained) list of base addresses for various DLLs, to avoid runtime relocation.</P>

						</P>
<p>
							<a name="idx1073749948"></a>
							<a name="idx1073749949"></a>
							<p><tt clasS="monofont">example_nt</tt>— 
    This is a subdirectory that shows how to build an extension as a DLL.</P>

						</p>
</blOckquOte>
				
				
					<h4>
UNIX</H4>
					<P>Binary distributions for the UNIX platforms are not made available by the Python Web site because the compilation process depends much on your system. In order to compile Python on a UNIX system, you first need to obtain the source code distribution. Note that the next guidelines are just a summary of the operations that you need to perform. This installation process, by default, installs Python under the <A Name="idx1073749950"></a>
						<A NAMe="idx1073749951"></a>
						<tt CLASs="monofont">/usr/local</tt> directory and presumes that you want to provide access to the <a NAME="idx1073749952"></a>
						<a name="idx1073749953"></a>
						<tt class="monofont">Tkinter</tt> module too. If that's not the case, you can just skip the whole <tt clAss="monofont">Tcl/Tk/Tkinter</Tt> steps and install just the core Python environment. You can skip building Tcl and Tk if they are already   installed on your system.</p>

					<oL type="1">
<Li>

							<p>Create a root directory with three subdirectories underneath: Python, Tcl, and Tk.</p>

						</LI>
<LI>

							<p>Download the latest versions of these three programs, and save them on the respective subdirectories.</p>

						</li>
<LI>

							<P>In each directory, you need to extract the files out of the package using a command such as this:</P>

							<pre>
								
gunzip -c filename | tar xf -

							</pRE>

						</LI>
<li>

							<p>Now, we need to configure and install Tcl and Tk. The actions below (steps 5, 6, and 7) need to be performed in both subdirectories, first for Tcl and later for Tk.</p>

						</LI>
<LI>

							<p>Go to the specific subdirectory.</p>

						</li>
<li>

							<p>Define the compiler and system options for the building process. You need to type the following command:</p>

							<pre>
								
./configure

							</pre>

						</li>
<li>

							<p>Run the utility commands that create and install the binary and library files.</p>

							<Pre>
								
make
make install

							</Pre>

						</lI>
<li>

							<p>Now, we are ready to install Python. Go to the Python subdirectory.</p>

						</Li>
<li>

							<P>Define the compiler and system options for the building process. You need to type the following command. Note that optionally, you can enable the threading option by passing the argument <TT Class="monofont">--with-thread</TT> to the <TT clasS="monofont">configure</TT> command. Also, you might want to enable floating point exception support by passing the argument <Tt claSS="monofont">--enable-fpectl</TT>.</p>

							<pre>
								
./configure

							</pre>

						</li>
<li>

							<p>Copy the <tt class="monofont">Modules/Setup.in</tT> file to the subdirectory <tt ClasS="monofont">Modules/Setup.</tt>
							</p>

						</lI>
<li>

							<p>In order to enable the <A NAMe="idx1073749954"></a>
								<a nAME="idx1073749955"></A>
								<a namE="idx1073749956"></A>
								<A Name="idx1073749957"></a>Tkinter module (because it is not enabled by default), you need to modify this file. This file is responsible for deciding the built-in modules that must be built along with Python. Modifying this file is not difficult, as you can see next. The following piece of file code shows where you need to change in order to enable Tkinter. This example shows what you might want to uncomment because it can vary for different UNIX systems (what you    see here should be fine for most systems though).</P>

							<PRE>
								
# The _tkinter module.
#
# The TKPATH variable is always enabled, to save you the effort.
TKPATH=:lib-tk

# The command for _tkinter is long and site specific.  Please
# uncomment and/or edit those parts as indicated.  If you don't have a
# specific extension (e.g. Tix or BLT), leave the corresponding line
# commented out.  (Leave the trailing backslashes in!  If you
# experience strange errors, you may want to join all uncommented
# lines and remove the backslashes -- the backslash interpretation is
# done by the shell's "read" command and it may not be implemented on
# every system.
#***Always uncomment this (leave the leading underscore in!):
_tkinter _tkinter.c tkappinit.c -DWITH_APPINIT \ 
#***Uncomment and edit to reflect where your Tcl/Tk headers are:
-I/usr/local/include \
#***Uncomment and edit to reflect where your X11 header files are:
-I/usr/X11R6/include \
#***Or uncomment this for Solaris:
#    -I/usr/openwin/include \
#***Uncomment and edit for Tix extension only:
#    -DWITH_TIX -ltix4.1.8.0 \
#***Uncomment and edit for BLT extension only:
#    -DWITH_BLT -I/usr/local/blt/blt8.0-unoff/include -lBLT8.0 \
#***Uncomment and edit for PIL (TkImaging) extension only:
#    -DWITH_PIL -I../Extensions/Imaging/libImaging  tkImaging.c \
#***Uncomment and edit for TOGL extension only:
#    -DWITH_TOGL togl.c \
#***Uncomment and edit to reflect where your Tcl/Tk libraries are:
-L/usr/local/lib \
#***Uncomment and edit to reflect your Tcl/Tk versions:
-ltk8.0 -ltcl8.0 \
#***Uncomment and edit to reflect where your X11 libraries are:
-L/usr/X11R6/lib \
#***Or uncomment this for Solaris:
#    -L/usr/openwin/lib \
#***Uncomment these for TOGL extension only:
#    -lGL -lGLU -lXext -lXmu \
#***Uncomment for AIX:
#    -lld  \
#***Always uncomment this; X11 libraries to link with:
-lX11

							</pre>

						</li>
<li>

							<p>Optionally, you can choose for <a name="idx1073749958"></a>
								<a name="idx1073749959"></a>
								<A naMe="idx1073749960"></a>
								<a Name="idx1073749961"></a>
								<A namE="idx1073749962"></A>building the modules as shared libraries. It is a good idea to build shared libraries because it will decrease the size of the Python binary, reduce the number of libraries it is linked to, and probably reduce its memory consumption. You need to look for the following lines in the <TT clasS="monofont">Setup.in</TT> file, and make the small change that is indicated there.</P>

							<pre>
								
# Uncommenting the following line tells makesetup that all following
# modules are to be built as shared libraries (see above for more
# detail; also note that *static* reverses this effect):
#*shared*

							</pRE>

							<DIv claSS="note"><P Class="notetitle"><b>Note</b></p><p>

								<p>Note that you can uncomment lines for other modules you want to build, as well.</p>

							</p></div>
<br>
<br>

						</li>
<Li>

							<p>Now, you just have to run the utility commands that creates and installs the Python executable and library files.</P>

							<pre>
								
make
make install

							</Pre>

						</li>
<Li>

							<p>Finally, sometimes you need to set up the environment variables: <tT CLAss="monofont">PATH,</tt>
								<TT CLass="monofont">PYTHONPATH,</tT>
								<TT Class="monofont">TCL_LIBRARY,</TT> and <TT class="monofont">TK_LIBRARY</tt> to the correct values. In most cases, this shouldn't be necessary because the programs are installed where they expect to be installed. Possibly having to add <tt class="monofont">/usr/local/bin</tt> to <tt clAss="monofont">PATH</Tt> is probably all that is needed.<a nAme="idx1073749963"></a>
								<a Name="idx1073749964"></A>
								<A NAme="idx1073749965"></a>
								<a NAME="idx1073749966"></a>
								<a naME="idx1073749967"></A>
								<A name="idx1073749968"></A>
								<A NAme="idx1073749969"></a>
							</p>

						</li>
</ol>

				
			</font>
<P><TABLE width="100%" border=0><TR valign="top"><TD><font size=1 color="#C0C0C0"><br></font></TD><TD align=right><font size=1 color="#C0C0C0">Last updated on 1/30/2002<br>Python Developer's Handbook, &copy;&nbsp;2002 Sams Publishing</font></TD></TR></TABLE></P>
<TABLE border=0 width="100%" cellspacing=0 cellpadding=0><TR><td align=left width="15%" class="headingsubbarbg"><a href="229.html" title="The Development Process of Python Programs"><font size="1">&lt;&nbsp;BACK</font></a></td><td align=center width="70%" class="headingsubbarbg"><font size="1"><a href="popanote.asp?pubui=oreilly&bookname=0672319942&snode=230" target="_blank" title="Make a public or private annnotation">Make Note</a> | <a href="230.html" title="Use a Safari bookmark to remember this section">Bookmark</a></font></td><td align=right width="15%" class="headingsubbarbg"><a href="231.html" title="Editing Code"><font size="1">CONTINUE&nbsp;&gt;</font></a></td></TR></TABLE>
</TD></TR></TABLE>
<br><TABLE width=100% bgcolor=white border=0 cellspacing=0 cellpadding=5><TR><TD><H4 class=Title>Index terms contained in this section</H4>
<font size=2>
 <a href="#idx1073749926">/PCbuild directory</a><BR>
 <a href="#idx1073749950">/usr/local directory</a><BR>
applications<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;source code<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749923">compiling</a> <a href="#idx1073749935">2nd</a> <a href="#idx1073749966">3rd</a><BR>
Build menu<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749930">Debug option</a><BR>
building<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749958">modules as shared libraries</a><BR>
code<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;source<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749922">compiling</a> <a href="#idx1073749934">2nd</a> <a href="#idx1073749965">3rd</a><BR>
compiling<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749920">source code</a> <a href="#idx1073749932">2nd</a> <a href="#idx1073749963">3rd</a><BR>
 <a href="#idx1073749915">config.c file</a><BR>
 <a href="#idx1073749913">config.h file</a><BR>
creating<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749962">modules as shared libraries</a><BR>
Debug option<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749928">Build menu</a><BR>
directories<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749927">/PCbuild</a><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749951">/usr/local</a><BR>
 <a href="#idx1073749941">dl_nt.c file</a><BR>
 <a href="#idx1073749947">dllbase_nt.txt file</a><BR>
enabling<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749957">Tkinter module</a><BR>
 <a href="#idx1073749948">example_nt subdirectory</a><BR>
files<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749914">config.c</a><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749912">config.h</a><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749940">dl_nt.c</a><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749946">dllbase_nt.txt</a><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749944">getpathp.c</a><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749942">import_nt.c</a><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749910">project</a><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749938">python_nt.rc</a><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749916">testpy.py</a><BR>
 <a href="#idx1073749945">getpathp.c file</a><BR>
 <a href="#idx1073749943">import_nt.c file</a><BR>
libraries<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shared<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749961">building modules as</a><BR>
menus<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Build<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749929">Debug option</a><BR>
modules<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749959">building as shared libraries</a><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749953">Tkinter</a> <a href="#idx1073749955">2nd</a><BR>
ports<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749919">testing</a><BR>
programs<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;source code<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749924">compiling</a> <a href="#idx1073749936">2nd</a> <a href="#idx1073749967">3rd</a><BR>
 <a href="#idx1073749911">project file</a><BR>
 <a href="#idx1073749939">python_nt.rc file</a><BR>
shared libraries<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749960">building modules as</a><BR>
software<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;source code<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749925">compiling</a> <a href="#idx1073749937">2nd</a> <a href="#idx1073749968">3rd</a><BR>
source code<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749921">compiling</a> <a href="#idx1073749933">2nd</a> <a href="#idx1073749964">3rd</a><BR>
subdirectories<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749949">example_nt</a><BR>
 <a href="#idx1073749931">subprojects</a><BR>
testing<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749918">ports</a><BR>
 <a href="#idx1073749917">testpy.py file</a><BR>
 <a href="#idx1073749952">Tkinter module</a> <a href="#idx1073749954">2nd</a><BR>
turning on<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749956">Tkinter module</a><BR>
UNIX<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compiling<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#idx1073749969">source code</a><BR>
<BR>
</font></TD></TR></TABLE>




<!--EndOfBrowse-->

</TD></TR></TABLE>
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#990000><tr><td><p align=center><font size=1 face="verdana,arial,helvetica" color=white>© 2002, O'Reilly & Associates, Inc.</font></p></td></tr></table>
</BODY>
</HTML>